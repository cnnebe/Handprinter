{% extends "base.html" %}

{% block content %}

{% if user.is_authenticated %}

<br><br><br><br><br>
<div class="container">
    <div class="row centered">
        <div class="col-xs-12 col-md-12 user-details">
            <div class="user-image">
            <img id="profile-img" class="profile-img-card" src="//ssl.gstatic.com/accounts/ui/avatar_2x.png" />
            </div>
            <div class="user-info-block">
                <div class="user-heading">
                    <h3>{{ user.first_name }} {{ user.last_name }}</h3>
                    <span class="help-block">{{ user.profile.location }}</span>
                </div>
                <ul class="navigation">
                    <li class="active">
                        <a data-toggle="tab" href="#information">
                            <span class="glyphicon glyphicon-user"></span>
                        </a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#settings">
                            <span class="glyphicon glyphicon-cog"></span>
                        </a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#myactionitems">
                            <span class="glyphicon glyphicon-tree-deciduous" ></span>
                        </a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#myhistory">
                            <span class="glyphicon glyphicon-thumbs-up"></span>
                        </a>
                    </li>
                </ul>
                <div class="user-body">
                    <div class="tab-content">
                        <div id="information" class="tab-pane active">
                            <h4>Account Information</h4>
                            <table>
                                <tr>Name: {{ user.first_name }} {{ user.last_name }}</tr>
                                <br>
                                <tr>Username: {{ user.username }}</tr>
                                <br>
                                <tr>Email: {{ user.email }}</tr> 
                                <br>
                                <tr>Date Joined: {{ user.date_joined}}</tr> 
                                <br>
                                <tr>Last Login Was: {{ user.last_login }}</tr>
                                <br>
                            </table>
                        </div>
                        <div id="settings" class="tab-pane">
                            <h4>Settings</h4>
                        </div>
                        <div id="myactionitems" class="tab-pane">
                            <h4>My Action Ideas</h4>
                            {% if myideas %}
                            <table>
                                <tr>
                                    <th>Action Idea &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                                    <th>Category &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</th>
                                    <th>Votes &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</th>
                                    <th>Date Created &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</th>
                                </tr>
                                    {% for ai in myideas %}
                                        <tr>
                                            <td><a href="{% url 'HandprintGenerator:detail' ai.id %}">{{ ai.name }}</a></td> 
                                            <td> {{ ai.category }} </td>
                                            <td> {{ai.numvotes}}</td>
                                            <td> {{ai.date_created}} </td>
                                        </tr>
                                     {% endfor %}
                            </table>     
                            {% else %}
                                <p>You haven't suggested any action ideas. Create one <a href=/new>here</a>!</p>
                            {% endif %}

                        </div>
                        <div id="myhistory" class="tab-pane">
                            <h4>My Comment History</h4>
                            <table>
                                {% if mycomments %}
                                <table>
                                <tr>
                                    <th>Action Idea &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                                    <th>Comment &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</th>
                                </tr>
                                    {% for comment in mycomments %}
                                        <tr>
                                            <td><a href="{% url 'HandprintGenerator:detail' comment.action_idea.id %}">{{ comment.action_idea.name }}</a></td> 
                                            <td> {{comment.text}} </td>
                                        </tr>
                                     {% endfor %}
                                </table>  
                                {% else %}
                                    <p>You have no comments.</p>
                                {% endif %}
                            </table>
                            <h4>My Voting History</h4>
                                <table>
                                    {% if myvotes %}
                                    <table>
                                    <tr>
                                        <th>Action Idea &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                                    </tr>
                                        {% for vote in myvotes %}
                                            <tr>
                                                <td><a href="{% url 'HandprintGenerator:detail' vote.action_idea.id %}">{{ vote.action_idea.name }}</a></td> 
                                            </tr>
                                         {% endfor %}
                                    </table>  
                                    {% else %}
                                        <p>You have no comments.</p>
                                    {% endif %}

                                </table>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
	</div>
</div>

{% else %}

<h3> Please <a href=/login>login</a> or create a <a href=/create_user>new account</a> to view your profile. </h3>

{% endif %}

<br><br><br><br>

{% endblock %}
