{% extends "base.html" %}

{% block content %}
        
    <h1> Action Ideas </h1>


 <div class="btn-group">
  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Action <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="#">Action</a></li>
    <li><a href="#">Another action</a></li>
    <li><a href="#">Something else here</a></li>
    <li role="separator" class="divider"></li>
    <li><a href="#">Separated link</a></li>
  </ul>
</div>
 

    <h2> Active </h2>
    <table>
    {% if action_ideas_active %}
    <tr><th>Action Idea</th><th>Category</th><th>Votes</th><th>Date Created</th></tr>
        {% for ai in action_ideas_active %}
            <tr>
                <td><a href="{% url 'HandprintGenerator:detail' ai.id %}">{{ ai.name }}</a></td>                
                <td> {{ ai.category }} </td>
                <td> {{ai.numvotes}}</td>
                <td> {{ai.date_created}} </td>
                {% if user.is_authenticated %}                
                <td> 
                    {% if ai.id in userVotes %}
                        <form action="" method="post">
                            <input type="hidden" name="action_idea" value="{{ ai.id }}">
                            <input type="submit" name="unvote" value="Unvote">
                            {% csrf_token %}
                        </form>
                    {% else %}
                        <form action="" method="post">
                            <input type="hidden" name="action_idea" value="{{ ai.id }}">
                            <input type="submit" name="vote" value="Vote">
                            {% csrf_token %}
                        </form>
                    {% endif %}
                </td>
                {% endif %}
            </tr>
        {% endfor %}
    {% else %}
        <p>No action ideas are available.</p>
    {% endif %}

    </table>
    <br>
    {% if user.profile.role == "Moderator" or user.is_staff %}
        <h2> Inactive </h2>
        <table>
        {% if action_ideas_inactive %}
        <tr><th>Action Idea</th><th>Category</th><th>Votes</th><th>Date Created</th></tr>
            {% for ai in action_ideas_inactive %}
                <tr>
                    <td><a href="{% url 'HandprintGenerator:detail' ai.id %}">{{ ai.name }}</a></td>                
                    <td> {{ ai.category }} </td>
                    <td> {{ai.numvotes}}</td>
                    <td> {{ai.date_created}} </td>
                </tr>
            {% endfor %}
        {% else %}
            <p>There are no inactive action ideas.</p>
        {% endif %}
    </table>
    {% endif %}

{% endblock %}
