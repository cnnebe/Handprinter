{% extends "base.html" %}

{% block content %}
        

<h1> Action Ideas </h1>

  <div class="dropdown">
  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
    Filter By
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
    <li><a href="/index_vote">Most Popular</a></li>
    <li><a href="/index_home">Home</a></li>
    <li><a href="/index_work">Work</a></li>
    <li><a href="/index_community">Community</a></li>
    <li><a href="/index_mobility">Mobility</a></li>
    <li><a href="/index_clothing">Clothing</a></li>
    <li><a href="/index_food">Food</a></li>
    <li><a href="/index_other">Other</a></li>
  </ul>
</div>


 
 <br><br>


    {% if user.profile.role == "Moderator" or user.is_staff %}
    <h2> Active </h2>
    {% endif %}
    <table>
    {% if action_ideas_active %}
    <tr>
        <th>Action Idea &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
        <th>Category &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</th>
        <th>Votes &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</th>
        <th>Date Created &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</th>
    </tr>
        {% for ai in action_ideas_active %}
            <tr>
                <td><a href="{% url 'HandprintGenerator:detail' ai.id %}">{{ ai.name }} </a> </td>                 
                <td> {{ ai.category }} </td>
                <td> {{ai.numvotes}}</td>
                <td> {{ai.date_created}} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</td>
                {% if user.is_authenticated %}                
                <td> 
                    {% if ai.id in userVotes %}
                        <form action="" method="post">
                            <input type="hidden" name="action_idea" value="{{ ai.id }}">
                            <input type="submit" name="unvote" value="Unvote">
                            {% csrf_token %}
                        </form>
                    {% else %}
                        <form action="" method="post">
                            <input type="hidden" name="action_idea" value="{{ ai.id }}">
                            <input type="submit" name="vote" value="Vote">
                            {% csrf_token %}
                        </form>
                    {% endif %}
                </td>
                {% endif %}
            </tr>
        {% endfor %}
    {% else %}
        <p>No action ideas are available, why don't you <a href=/new>add one.</a> </p>
    {% endif %}

    </table>
    <br>
    {% if user.profile.role == "Moderator" or user.is_staff %}
        <h2> Inactive</h2>
        <table>
        {% if action_ideas_inactive %}
       <tr>
        <th>Action Idea &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
        <th>Category &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</th>
        <th>Votes &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</th>
        <th>Date Created &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</th>
    </tr>
            {% for ai in action_ideas_inactive %}
                <tr>
                    <td><a href="{% url 'HandprintGenerator:detail' ai.id %}">{{ ai.name }}</a></td>                
                    <td> {{ ai.category }} </td>
                    <td> {{ai.numvotes}}</td>
                    <td> {{ai.date_created}} </td>
                </tr>
            {% endfor %}
        {% else %}
            <p>There are no inactive action ideas. To make an idea inactive, you must delete it.</p>
        {% endif %}
    </table>
    {% endif %}

{% endblock %}
